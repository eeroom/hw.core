<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml" >
<head>
    <meta charset="UTF-8">
    <title>springmvc-总结</title>
</head>
<body>
<h3><a href="/account/logout">退出登录</a></h3>
<h3>修改maven项目的目录结构</h3>
<ol>
    <li>默认目录结构：src/main/java;src/main/resources；src/main/webapp</li>
    <li>新的目录结构：src/java;src/resources;src/webapp</li>
    <li>修改pom.xml，具体参见pom.xml中的说明</li>
</ol>
<h3>把war文件发布到tomcat运行</h3>
<ol>
    <li>把war文件复制到tomcat的webapps目录，比如springmvc.war</li>
    <li>修改conf\server.xml,&lt;Host&gt;&lt;/Host&gt;节下增加一条，&lt;Context path="/springmvc" docBase="springmvc" reloadable="true" /&gt;</li>
</ol>
<h3>代码目录结构和war包目录结构关系</h3>
<img src="/代码目录结构和war包目录结构关系.png" alt="">
<h3><a href="/home/add" target="_blank">Asp.Net MVC风格</a></h3>
<ol>
    <li>基于约定：按照controller/action的请求路径监听</li>
    <li>优点：避免写一些重复和意义不大的RequestMapping("/home/student"),借鉴asp.net mvc的做法</li>
    <li>前提：控制器添加Controller或者RestController特性，方法没有添加RequestMapping特性，方法为public并且为实例方法</li>
</ol>
<h3>Url和请求参数名称忽略大小写</h3>
<p>默认为大小写敏感，通过配置实现修改</p>
<h3>thymeleay视图引擎</h3>
<h4><a target="_blank" href="/bootstrap/biaodan">母版页</a></h4>
<ol>
    <li>引入thymeleaf-spring4和thymeleaf-layout-dialect</li>
    <li>javaconfig,配置视图解析器，特别注意layout的支持</li>
    <li>定义母版的占位坑layout:fragment="content"，指定母版页layout:decorator="layout/layout"</li>
    <li>渲染顺序，待研究</li>
    <li>业务部分html传值给母版页，在业务html的html使用th:with定义变量和赋值，母版页使用#vars中可以取到值，使用场景：设置页面title</li>
    <li>代码传递数据给母版页，待研究，目前可行办法，利用#session或者#request等传递数据，场景：母版页需要菜单数据生成左侧菜单</li>
    <li>thymeleaf模板里的一些自定义语法，百度</li>
</ol>
<h4>部分视图</h4>
<h4>配置web.xml，避免/views/里面的thymeleaf视图文件被直接访问。类似于/WEB-INF/默认不能被直接访问</h4>
<p>参照web.xml中</p>
<h3>请求参数的模型绑定</h3>
<ol>
    <li>参数按照application/x-www-form-urlencoded规则,场景：表单提交</li>
    <li>参数按照application/json规则,场景：表单提交和api提交</li>
    <li>参数按照multipart/form-data规则,场景：上传文件</li>
</ol>
<h3>身份认证</h3>
<ol>
    <li>spring-security</li>
    <li>最简单的表单认证</li>
</ol>
<h3>spring-security</h3>
<ol>
    <li>spring-security-web,spring-security-config,spring-security-core,这3个核心依赖</li>
    <li>启用spring-security方式1，定义一个class继承org.springframework.security.web.context.AbstractSecurityWebApplicationInitializer</li>
    <li>启用spring-security方式2，在org.springframework.web.servlet.support.AbstractAnnotationConfigDispatcherServletInitializer中，重写getServletFilters，返回一个名称为springSecurityFilterChain的DelegatingFilterProxy类型的fileter</li>
    <li>配置spring-security,</li>
</ol>
</body>
</html>